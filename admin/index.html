<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Western Holiday Lighting | Boise–Meridian–Nampa Christmas Light Installation</title>
  <meta name="description" content="Premium, insured Christmas light installation across the Treasure Valley. Custom-cut C9 LEDs, pro design, safe install, takedown & storage." />

  <!-- Canonical + social -->
  <link rel="canonical" href="https://lightsidaho.com/">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Western Holiday Lighting – Professional Christmas Light Installation">
  <meta property="og:description" content="Custom-fit C9 LEDs, pro design & safe installation. Serving Boise, Meridian, Nampa, Eagle, Kuna & Caldwell.">
  <meta property="og:url" content="https://lightsidaho.com/">
  <meta property="og:image" content="https://lightsidaho.com/uploads/logo.png">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Security & transport -->
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <meta name="referrer" content="strict-origin-when-cross-origin">

  <!-- Icons (also stops 404 probing) -->
  <link rel="icon" type="image/png" href="/uploads/logo.png">
  <link rel="apple-touch-icon" href="/uploads/logo.png">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <!-- Netlify Identity (invites/login) -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

  <style>
    :root{
      --bg:#0b1220; --bg2:#0f1a33; --brand:#0ea5e9; --accent:#22d3ee; --text:#e5f0ff; --muted:#98a6bd; --card:#0e162b;
      --xmasRed:#ef4444; --xmasGreen:#22c55e; --gold:#facc15;

      /* easy knobs */
      --logo-desktop: 384px;  /* desktop logo height (~60% bigger) */
      --logo-mobile-w: 70vw;  /* mobile logo width (center) */
      --trim-desktop: -38px;  /* trim top/bottom space around PNG */
      --trim-mobile:  -60px;
      --h1-max: 42px;
    }

    *{box-sizing:border-box}
    html,body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--text)}
    a{color:var(--accent);text-decoration:none}
    .container{max-width:1100px;margin:0 auto;padding:0 20px}

    /* Header (no sticky) + optional banner image behind it */
    .header-wrap{
      position: relative;
      background: var(--bg);
    }
    .header-bg{
      position:absolute; inset:0;
      background: #0a1324 center/cover no-repeat;
      opacity:.25;
      z-index:0;
    }
    .nav{
      position:relative; z-index:1;
      display:flex; align-items:center; justify-content:space-between;
      padding: 8px 0;
    }
    .logo-wrap{display:flex; align-items:center; gap:0}
    .logo{
      height: var(--logo-desktop);
      width:auto; display:block;
      margin-block: var(--trim-desktop);
    }
    .btn{display:inline-block; padding:12px 18px; border-radius:12px;
      background:linear-gradient(135deg,var(--xmasRed),var(--xmasGreen));
      color:#052030; font-weight:800; letter-spacing:.3px;
      box-shadow:0 6px 18px rgba(239,68,68,.15),0 2px 8px rgba(34,197,94,.15)
    }
    .btn.outline{background:transparent;color:var(--text);border:1px solid rgba(255,255,255,.15)}
    .cta{display:flex; gap:12px; flex-wrap:wrap}

    /* Floating CTA button (sticky) */
    .floating-cta{
      position:fixed; right:18px; top:18px; z-index:30;
      display:flex; flex-direction:column; gap:12px; align-items:flex-end;
    }
    .floating-pill{
      padding:10px 14px; border-radius:14px;
      background:linear-gradient(180deg,rgba(255,255,255,.10),rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.16); box-shadow:0 8px 28px rgba(0,0,0,.25);
    }
    .floating-cta .btn{box-shadow:0 8px 24px rgba(0,0,0,.25)}

    /* Hero */
    .hero{position:relative; z-index:1; display:grid; grid-template-columns:1.1fr .9fr; gap:28px; padding: 8px 0 32px}
    @media (max-width:900px){.hero{grid-template-columns:1fr}}
    .badge{
      display:inline-block; font-size:.92rem; padding:6px 12px; margin:6px 0 14px 0;
      border-radius:999px; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12); color:var(--text);
    }
    .hero h1{font-size:clamp(26px,3.3vw,var(--h1-max)); line-height:1.08; margin:6px 0 10px}
    .hero p{color:var(--muted); font-size:1.02rem; margin-top:4px}

    /* Snow only inside banner strip, never over cards/text */
    .snow-stage{
      position:absolute; inset:0 0 calc(100% - 240px) 0;  /* visible across top strip */
      pointer-events:none; z-index:0; overflow:hidden;
    }
    .flake{position:absolute; top:-20px; width:8px; height:8px; border-radius:50%;
      background:rgba(255,255,255,.85); filter:blur(.4px); opacity:.9; will-change:transform,opacity;}

    /* Cards & content */
    .card{
      position:relative; z-index:2;
      background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.08); border-radius:18px; padding:18px;
    }
    form{display:grid; gap:12px}
    input,select,textarea{width:100%; padding:12px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.12); background:#0b1426; color:var(--text)}
    .disclaimer{font-size:.85rem;color:#a7b5cc}

    .grid{display:grid; gap:16px}
    .grid.cols-3{grid-template-columns:repeat(3,1fr)}
    @media (max-width:900px){.grid.cols-3{grid-template-columns:1fr}}
    h2{font-size:clamp(22px,3vw,34px); margin:8px 0 6px}
    .section{padding:44px 0}
    .price{font-size:28px; font-weight:800}
    .from{color:var(--muted); font-size:.9rem}
    .list{margin:10px 0 0; padding:0 0 0 18px; color:var(--text)}
    .bar{margin:20px 0; height:1px; background:linear-gradient(90deg,transparent,rgba(255,255,255,.18),transparent)}
    .gallery{display:grid; grid-template-columns:repeat(6,1fr); gap:8px}
    @media (max-width:900px){.gallery{grid-template-columns:repeat(3,1fr)}}
    .gallery figure{aspect-ratio:1; border-radius:12px; background:#0d1b2a; border:1px dashed rgba(255,255,255,.1); display:flex; align-items:center; justify-content:center; color:#99a; margin:0; overflow:hidden}
    .gallery img{max-width:100%; max-height:100%; display:block}

    footer{padding:40px 0; color:#9db4d6}

    /* Responsive header/logo */
    @media (max-width:1100px){ .logo{height:320px; margin-block:-22px} }
    @media (max-width:780px){
      .nav{flex-direction:column; align-items:center; gap:6px; padding:2px 0}
      .logo-wrap{width:100%; justify-content:center}
      .logo{width:var(--logo-mobile-w); height:auto; margin-block: var(--trim-mobile)}
      .floating-cta{left:50%; right:auto; transform:translateX(-50%); top:16px; align-items:center}
    }
  </style>
</head>
<body>

  <!-- Floating sticky CTAs -->
  <div class="floating-cta">
    <a class="floating-pill" href="#quote">Get an Instant Estimate</a>
    <a class="btn" id="header_cta_secondary" href="tel:+12084093106">Call/Text (208) 409-3106</a>
  </div>

  <!-- Header with banner background (from CMS) -->
  <header class="header-wrap">
    <div class="header-bg" id="header_bg"></div>
    <div class="container nav">
      <div class="logo-wrap">
        <img id="logo" class="logo" src="/uploads/logo.png" alt="Western Holiday Lighting logo">
      </div>
      <div class="cta" aria-hidden="true"><!-- kept for layout balance --></div>
    </div>

    <!-- Snow only inside top banner strip -->
    <div class="snow-stage" id="snow"></div>
  </header>

  <main class="container">
    <section class="hero">
      <div>
        <span class="badge" id="areas">Boise • Meridian • Nampa • Kuna • Eagle • Caldwell</span>
        <h1 id="hero_headline">Pro Christmas Light Installation across Boise–Meridian–Nampa</h1>
        <p id="hero_subheadline" class="muted">Lease premium C9 LEDs on custom-cut lines for a perfect fit. Our full-service packages include design, installation, in-season maintenance, takedown, and optional storage.</p>
        <p><strong id="hero_offer">Book by Oct 15 & save $100</strong></p>
      </div>

      <div class="card">
        <h2 id="quote">Instant Estimate</h2>
        <p class="muted">Text us your address and a photo of the front of your home for a fast quote, or use this form.</p>

        <form name="quote" method="POST" data-netlify="true" action="/success/">
          <input type="hidden" name="form-name" value="quote" />
          <label>Full Name<input name="name" required></label>
          <label>Mobile Number<input name="phone" required></label>
          <label>Address<input name="address" required placeholder="Street, City"></label>
          <label>Home Type
            <select name="stories">
              <option>Single-story</option><option>Two-story</option><option>Split level</option>
            </select>
          </label>
          <label>Extras
            <select name="extras">
              <option>None</option><option>Wreath</option><option>Tree wraps</option><option>Walkway stakes</option>
            </select>
          </label>
          <label>Notes<textarea name="notes" rows="3" placeholder="Anything we should know? Gate code, steep roof, etc."></textarea></label>

          <div class="cta">
            <button class="btn" type="submit">Get My Estimate</button>
            <a class="btn outline" id="sms_link" href="sms:+12084093106?&body=Hi%20—%20my%20address%20is%20">Text Us Instead</a>
          </div>

          <p class="disclaimer">We'll send a ballpark quote using satellite & street views, then confirm on-site.</p>
        </form>
      </div>
    </section>

    <section id="packages" class="section">
      <h2>Simple Packages</h2>
      <p id="service_summary" class="muted">Transparent, competitive pricing for seasonal installs.</p>
      <div id="packages_wrap" class="grid cols-3"></div>
    </section>

    <section class="section">
      <h2>Recent Work</h2>
      <div id="gallery" class="gallery"></div>
    </section>

    <section id="faq" class="section">
      <h2>FAQ</h2>
      <div id="faq_wrap" class="grid cols-3"></div>
    </section>

    <section class="section">
      <h2>What Neighbors Say</h2>
      <div id="testimonials" class="grid cols-3"></div>
    </section>
  </main>

  <footer>
    <div class="container">
      <div class="bar"></div>
      <div style="display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap">
        <div>© <span id="y"></span> <span id="business_name_footer">Western Holiday Lighting</span></div>
        <div id="footer_line" class="muted">Licensed & Insured • (208) 409-3106 • info@lightsidaho.com</div>
      </div>
    </div>
  </footer>

  <script>
  const $ = (id) => document.getElementById(id);
  const j = async (p) => { try { const r = await fetch(p); if (!r.ok) return null; return await r.json(); } catch(e){ return null; } };

  // Fill content from CMS JSON
  async function init(){
    const site  = await j('/content/site.json');
    const pkgs  = await j('/content/packages.json');
    const faq   = await j('/content/faq.json');
    const testi = await j('/content/testimonials.json');
    const gal   = await j('/content/gallery.json');

    if(site){
      // assets
      if (site.logo) $('logo').setAttribute('src', site.logo);
      if (site.header_bg) $('header_bg').style.backgroundImage = `url(${site.header_bg})`;

      // copy/text
      $('business_name_footer').textContent = site.business_name || 'Western Holiday Lighting';
      $('hero_headline').textContent   = site.hero_headline || $('hero_headline').textContent;
      $('hero_subheadline').textContent= site.hero_subheadline || $('hero_subheadline').textContent;
      $('hero_offer').textContent      = site.hero_offer || $('hero_offer').textContent;
      $('service_summary').textContent = site.service_summary || $('service_summary').textContent;
      $('footer_line').textContent     = site.footer_line || $('footer_line').textContent;
      if (Array.isArray(site.areas)) $('areas').textContent = site.areas.join(' • ');

      // CTAs
      if (site.header_cta_secondary) document.getElementById('header_cta_secondary').textContent = site.header_cta_secondary;
      if (site.phone_href){
        document.getElementById('header_cta_secondary').setAttribute('href', 'tel:'+site.phone_href);
        const smsLink = document.getElementById('sms_link');
        if (smsLink) smsLink.setAttribute('href', 'sms:'+site.phone_href+'?&body=Hi%20—%20my%20address%20is%20');
      }
    }

    if(pkgs?.packages){
      const el = document.getElementById('packages_wrap');
      el.innerHTML = pkgs.packages.map(p => `
        <div class="card">
          <h3>${p.title||''}</h3>
          <div class="price">From $${p.price_from||''}</div>
          <div class="from">${p.blurb||''}</div>
          <ul class="list">${(p.includes||[]).map(i=>`<li>${i}</li>`).join('')}</ul>
          <div class="cta"><a class="btn" href="#quote">${p.cta||'Get Quote'}</a></div>
        </div>`).join('');
    }

    if(gal?.images){
      const g = document.getElementById('gallery');
      g.innerHTML = gal.images.map(it => `
        <figure title="${it.label||''}">
          ${it.image ? `<img src="${it.image}" alt="${it.label||'Gallery'}">` : it.label||'Image'}
        </figure>`).join('');
    }

    if(faq?.faqs){
      const wrap = document.getElementById('faq_wrap');
      wrap.innerHTML = faq.faqs.map(q => `<div class="card"><h3>${q.q||''}</h3><p class="muted">${q.a||''}</p></div>`).join('');
    }

    if(testi?.testimonials){
      const t = document.getElementById('testimonials');
      t.innerHTML = testi.testimonials.map(x => `<div class="card"><p>"${x.quote||''}"</p><p class="muted">— ${x.name||''}</p></div>`).join('');
    }

    document.getElementById('y').textContent = new Date().getFullYear();
  }
  init();

  // Snow burst (10s) inside banner strip only
  (function snowBurst(){
    const stage = $('snow'); if (!stage) return;
    const start = Date.now(); const DUR = 10000; // 10s
    const W = () => stage.clientWidth, H = () => stage.clientHeight;

    function spawn(){
      if (Date.now() - start > DUR) return;       // stop after 10s
      const f = document.createElement('div');
      f.className = 'flake';
      const x = Math.random() * W();
      const s = 6 + Math.random()*6;              // size/speed proxy
      f.style.left = x + 'px';
      f.style.width = f.style.height = (s*.9) + 'px';
      stage.appendChild(f);

      const fall = s*1200 + 1200 + Math.random()*800;
      const drift = (Math.random()*2-1)*80;
      f.animate([
        { transform:`translate(0, -20px)`, opacity:.95 },
        { transform:`translate(${drift}px, ${H()+20}px)`, opacity:.0 }
      ], { duration: fall, easing: 'linear' })
      .finished.then(() => f.remove());

      setTimeout(spawn, 60 + Math.random()*120);
    }
    spawn();
  })();

  // Identity invite redirect & post-login
  if (location.hash && location.hash.startsWith('#/invite')) {
    location.href = '/admin/' + location.hash;
  }
  if (window.netlifyIdentity) {
    window.netlifyIdentity.on('init', (user) => {
      if (!user) window.netlifyIdentity.on('login', () => { location.href = '/admin/'; });
    });
  }
  </script>
</body>
</html>
